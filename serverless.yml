org: graciamendoza
service: chinawok-api


provider:
  name: aws
  runtime: python3.13
  stage: dev
  timeout: 20
  memorySize: 256
  iam:
    role: arn:aws:iam::645888963933:role/LabRole   # usas tu rol existente
  environment:
    LOCAL_TABLE: chinawok_local
    INVENTARIO_TABLE: chinawok_inventario

functions:
  # -------- LOCAL --------
  localListar:
    handler: local/ListarLocales.lambda_handler
    events:
      - http:
          path: /local/listar
          method: get
          cors: true
  localCrear:
    handler: local/CrearLocal.lambda_handler
    events:
      - http:
          path: /local/crear
          method: post
          cors: true
  localObtener:
    handler: local/ObtenerLocal.lambda_handler
    events:
      - http:
          path: /local/obtener/{id}
          method: get
          cors: true
  localActualizar:
    handler: local/ActualizarLocal.lambda_handler
    events:
      - http:
          path: /local/actualizar/{id}
          method: put
          cors: true
  localEliminar:
    handler: local/EliminarLocal.lambda_handler
    events:
      - http:
          path: /local/eliminar/{id}
          method: delete
          cors: true

resources:
  Resources:
    LocalTable:
      Type: AWS::DynamoDB::Table
      Properties:
        TableName: chinawok_local
        BillingMode: PAY_PER_REQUEST
        AttributeDefinitions:
          - AttributeName: id
            AttributeType: S
        KeySchema:
          - AttributeName: id
            KeyType: HASH

    